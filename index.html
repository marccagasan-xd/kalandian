<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kalandian</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Comic Sans MS', cursive, sans-serif;
}

html, body {
  height: 100%;
}

body {
  background: linear-gradient(180deg, #fff0f5 0%, #ffe6f0 100%);
  color: #4d0033;
  overflow: hidden;
}

.screen {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 24px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.5s ease, transform 0.6s ease;
}

.screen.active {
  opacity: 1;
  pointer-events: auto;
  transform: translateX(0);
}

.card {
  width: 90%;
  max-width: 900px;
  background: rgba(255, 240, 245, 0.8);
  padding: 28px;
  border-radius: 20px;
  border: 2px solid #ffb6c1;
  box-shadow: 0 10px 25px rgba(255, 182, 193, 0.4);
}

h1 {
  font-size: 32px;
  margin-bottom: 12px;
  color: #d63384;
  text-align: center;
}

p.lead {
  color: #993366;
  margin-bottom: 18px;
  text-align: center;
}

.progress {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 8px;
  justify-content: center;
}

.progress .bar {
  width: 160px;
  height: 8px;
  background: #ffd6e8;
  border-radius: 999px;
  overflow: hidden;
}

.progress .bar > i {
  display: block;
  height: 100%;
  width: 0%;
  background: #ff69b4;
}

.step {
  font-weight: 600;
  color: #ff69b4;
}

.question {
  font-size: 22px;
  margin: 12px 0 6px;
  text-align: center;
}

.choices {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 12px;
}

.choice {
  background: #fff0f5;
  border: 2px solid #ff69b4;
  padding: 12px 16px;
  border-radius: 15px;
  cursor: pointer;
  font-weight: 600;
  color: #4d0033;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.choice:hover {
  background: #ff69b4;
  color: #fff;
  transform: translateY(-3px);
  box-shadow: 0 6px 20px rgba(255, 105, 180, 0.3);
}

.choice.selected {
  background: #ff69b4;
  color: #fff;
  border-color: #ff1493;
}

.controls {
  display: flex;
  gap: 12px;
  align-items: center;
  justify-content: center;
  margin-top: 18px;
}

.btn {
  padding: 10px 18px;
  border-radius: 15px;
  border: none;
  background: #ff69b4;
  color: #fff;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 6px 18px rgba(255, 105, 180, 0.3);
}

.btn:hover {
  background: #ff1493;
}

.btn.ghost {
  background: transparent;
  color: #ff69b4;
  border: 2px solid #ff69b4;
}

.small {
  font-size: 13px;
  color: #993366;
  text-align: center;
}

.result {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}

.score {
  font-size: 48px;
  font-weight: 800;
  color: #ff69b4;
}

.nav-arrows {
  position: fixed;
  bottom: 28px;
  right: 28px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.arrow {
  width: 48px;
  height: 48px;
  border-radius: 12px;
  background: #fff0f5;
  border: 2px solid #ffb6c1;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 8px 20px rgba(255, 182, 193, 0.3);
}

.arrow:hover {
  background: #ff69b4;
  color: #fff;
}

/* For moving heart*/
.heart {
  color: #ff1493; /* pink heart */
  margin-left: 8px;
  font-size: 40px; /* adjust size */
  display: inline-block;
  transform-origin: center;
  animation: flipHeart 5s infinite linear;
}

@keyframes flipHeart {
  0%   { transform: rotateY(0deg); }
  50%  { transform: rotateY(180deg); }
  100% { transform: rotateY(360deg); }
}
/* Make only the final flow message bigger */
#finalLine {
  font-size: 45px;
  font-weight: 700;
  text-align: center;
  line-height: 1.3;
}
/* Final question overlay */
#finalQuestion.show {
  display: flex !important;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  flex-direction: column;
  align-items: center;
  gap: 12px;
  z-index: 9999;
}




@media(max-width:480px){
  .card {
    padding: 18px;
    border-radius: 16px;
  }
}


  </style>
</head>
<body>
  <audio id="finalMusic" src="kanta.mp3" preload="auto"></audio>

  <!-- Welcome Screen -->
  <section class="screen active" id="s1">
    <div class="card" role="region" aria-labelledby="title1">
      <h1 id="title1">All About me <i class="fa-solid fa-heart heart"></i></h1>
      <p class="lead">You need at least 6 points to get your prize.</p>
      <div class="progress" aria-hidden="true">
        <div class="step">1 / 11</div>
        <div class="bar" aria-hidden="true"><i style="width:0%"></i></div>
      </div>
      <div style="margin-top:18px;display:flex;gap:12px;justify-content:center">
        <button class="btn" id="startBtn">Start Quiz</button>
      </div>
    </div>
  </section>

  <!-- Question Screens s2..s11 -->
  <section class="screen" id="s2"><div class="card" id="qcard2"></div></section>
  <section class="screen" id="s3"><div class="card" id="qcard3"></div></section>
  <section class="screen" id="s4"><div class="card" id="qcard4"></div></section>
  <section class="screen" id="s5"><div class="card" id="qcard5"></div></section>
  <section class="screen" id="s6"><div class="card" id="qcard6"></div></section>
  <section class="screen" id="s7"><div class="card" id="qcard7"></div></section>
  <section class="screen" id="s8"><div class="card" id="qcard8"></div></section>
  <section class="screen" id="s9"><div class="card" id="qcard9"></div></section>
  <section class="screen" id="s10"><div class="card" id="qcard10"></div></section>
  <section class="screen" id="s11"><div class="card" id="qcard11"></div></section>

  <!-- Result & Final Question Screen -->
  <section class="screen" id="s12">
    <div class="card result" role="region" aria-labelledby="resultTitle">
      <h1 id="finalTitle">Quiz Finished! <i class="fa-solid fa-heart heart"></i></h1>
      <div class="score" id="finalScore">0 / 10</div>
      <p class="small" id="finalMsg"></p>

      <!-- Karaoke style final messages -->
      <div id="finalFlow" style="display:none; flex-direction:column; align-items:center; gap:12px;">
        <p id="finalLine" class="lead"></p>
        <button class="btn" id="nextFinalBtn">Next</button>
      </div>

      <!-- Final yes/no question -->
      <div id="finalQuestion" style="display:none; flex-direction:column; align-items:center; gap:12px;">
        <h2 style="font-size:48px; color:#d63384;">‚ÄúCan I court you‚Ä¶ bubby?‚Äù ü§ç</h2>
        <div style="display:flex; gap:12px; margin-top:12px;">
          <button class="btn" id="yesBtn">Yes</button>
          <button class="btn ghost" id="noBtn">No</button>
        </div>
      </div>

      <!-- Result message after Yes / No -->
     <div id="finalResult"
      style="display:none; font-size:36px; font-weight:700; color:#d63384; margin-top:20px; text-align:center;">
      </div>

      <div style="display:flex;gap:12px;margin-top:12px">
        <button class="btn" id="restartBtn">Play Again</button>
        <button class="btn ghost" id="shareBtn">Final Question</button>
      </div>
    </div>
  </section>

  <!-- Controls -->
  <div style="position:fixed;left:50%;transform:translateX(-50%);bottom:26px;display:flex;gap:12px;align-items:center">
    <button class="btn ghost" id="prevBtn">Previous</button>
    <div style="min-width:120px;text-align:center;color:var(--muted)"><span id="labelStep">1 / 11</span></div>
    <button class="btn" id="nextBtn">Next</button>
  </div>

  <!-- Nav arrows -->
  <div class="nav-arrows" aria-hidden="true">
    <div class="arrow" id="arrowPrev">‚óÄ</div>
    <div class="arrow" id="arrowNext">‚ñ∂</div>
  </div>

<script>
/***************
 * QUESTIONS DATA
 ***************/
const questions = [
  {q: "What's my favorite color?", choices:["White","Black","Purple"], a: "Purple"},
  {q: "When is my birthday?", choices:["01/10/03","03/07/02 ","03/07/04"], a: "03/07/04"},
  {q: "What am I addicted to?", choices:["Online Games","You","Offline Games"], a: "Online Games"},
  {q: "What game do I usually play?", choices:["Mobile Legends","League of Legends ","Call of Duty"], a: "Mobile Legends"},
  {q: "What sports do I play the most?", choices:["Basketball","Volleyball","Table Tennis"], a: "Table Tennis"},
  {q: "Which do I prefer the most?", choices:["Sunset","Sunrise","Moon"], a: "Sunset"},
  {q: "Which season do I prefer?", choices:["Summer","Winter","Autumn"], a: "Autumn"},
  {q: "What country is my dream travel destination?", choices:["Japan","Korea","Switzerland"], a: "Switzerland"},
  {q: "What kind of pet do I prefer?", choices:["Dog","Cat","Bird"], a: "Dog"},
  {q: "Why do you think I fell in love with you?", choices:["Your Beauty","Your Treatment","Your Smile"], a: "Your Treatment"},
];

/***************
 * STATE
 ***************/
let current = 1; // screens: 1 = welcome, 2..11 questions, 12 = final
const totalScreens = 12;
const totalQuestions = questions.length;
const answers = Array(totalQuestions).fill(null);

// elements
const startBtn = document.getElementById('startBtn');
const nextBtn = document.getElementById('nextBtn');
const prevBtn = document.getElementById('prevBtn');
const restartBtn = document.getElementById('restartBtn');
const shareBtn = document.getElementById('shareBtn');
const labelStep = document.getElementById('labelStep');
const progressBar = document.querySelector('.progress .bar > i');
const arrowNext = document.getElementById('arrowNext');
const arrowPrev = document.getElementById('arrowPrev');

/***************
 * RENDER QUESTIONS
 ***************/
function renderQuestions(){
  for(let i=0;i<totalQuestions;i++){
    const idx = i+2; // s2 -> question 1
    const container = document.getElementById('qcard'+idx);
    container.innerHTML = `
      <h2 class="question">${i+1}. ${questions[i].q}</h2>
      <p class="small">Choose the best answer</p>
      <div class="choices" id="choices-${i}"></div>
    `;
    const choicesEl = container.querySelector(`#choices-${i}`);
    questions[i].choices.forEach(choice =>{
      const btn = document.createElement('button');
      btn.className='choice';
      btn.type='button';
      btn.innerHTML = `<span>${choice}</span>`;
      btn.onclick = ()=> selectAnswer(i,choice,btn);
      choicesEl.appendChild(btn);
    });
  }
}

function selectAnswer(qIndex, choice, btn){
  answers[qIndex]=choice;
  const parent = btn.parentElement;
  parent.querySelectorAll('.choice').forEach(b=>b.classList.remove('selected'));
  btn.classList.add('selected');
  setTimeout(()=>{
    if(current < totalScreens-1) goTo(current+1);
    else showResult();
  },250);
}

function goTo(screenNum){
  if(screenNum<1 || screenNum>totalScreens) return;
  document.getElementById('s'+current).classList.remove('active');
  current = screenNum;
  document.getElementById('s'+current).classList.add('active');
  updateControls();
}

function updateControls(){
  labelStep.textContent = `${Math.min(current,11)} / 11`;
  const answered = answers.filter(a=>a!==null).length;
  const percent = Math.round((answered/totalQuestions)*100);
  if(progressBar) progressBar.style.width = percent + '%';

  prevBtn.disabled = (current === 1);
  nextBtn.disabled = (current === totalScreens || current === totalScreens-1);
}

function startQuiz(){ goTo(2); }
startBtn.addEventListener('click', startQuiz);
nextBtn.addEventListener('click', ()=>{ if(current < totalScreens) goTo(current+1); });
prevBtn.addEventListener('click', ()=>{ if(current >1) goTo(current-1); });
arrowNext.addEventListener('click', ()=>{ if(current < totalScreens) goTo(current+1); });
arrowPrev.addEventListener('click', ()=>{ if(current >1) goTo(current-1); });

function showResult(){
  let score = 0;
  for(let i=0;i<questions.length;i++) if(answers[i]===questions[i].a) score++;
  document.getElementById('finalScore').textContent = `${score} / ${totalQuestions}`;
  const msg = document.getElementById('finalMsg');
  // hide or show final question section based on score
const finalQuestionBox = document.getElementById('finalQuestion');
const finalBtn = document.getElementById('shareBtn');

if(score < 6){
  finalQuestionBox.style.display = "none";  // hide "Pwede manligaw?"
  finalBtn.style.display = "none";          // hide "Final Question" button
} else {
  finalBtn.style.display = "inline-block";  // allow access
}
  if(score === totalQuestions) msg.textContent = "Wag mo pindutin yung final question kapag hindi kapa ready HAHAH";
  else if(score >= totalQuestions*0.7) msg.textContent = "Bakit hindi perfect ha. bubby?";
  else if(score >= totalQuestions*0.4) msg.textContent = "Ulitin mo!";
  else msg.textContent = "Wala ka talagang pake sakin bubby, tsk!";
  goTo(12);
}

restartBtn.addEventListener('click', ()=>{
  for(let i=0;i<answers.length;i++) answers[i]=null;
  document.querySelectorAll('.choice').forEach(c=>c.classList.remove('selected'));
  if(progressBar) progressBar.style.width = '0%';
  goTo(1);
});

/***************
 * FINAL QUESTION FLOW
 ***************/
 const finalMessages = [
"Hi bubby‚Ä¶", 

"Ginawa ko itong website na ‚Äôto kasi alam mo naman‚Ä¶",
"Hindi talaga ako vocal sa nararamdaman ko.",

"Pero may gusto akong sabihin sa‚Äôyo.",
"Kaya sana basahin mo ito nang buong puso.",

"Lahat ng naka sulat dito..",
"galing sa totoo at sincere na nararamdaman ko para sa‚Äôyo.",

"Naalala mo pa ba nung unang beses tayong nagkita?",
"Sa swimming pa talaga ‚Äôyon eno?",

"Sobrang random lang ng araw na ‚Äôyon.",
"pero hindi ko ‚Äôyon makakalimutan, Pa'no ko ba naman makakalimutan yung araw  na bigla nalang ako naka tanggap ng compliments out of nowhere",

"Akala ko normal na araw lang.",
"Pero simula nun, naging special na yung araw na ‚Äôyon para sa‚Äôkin.",

"Hindi ko akalaing makakatanggap ako ng papuri sa araw na iyon, at galing pa ito sa isang magandang babae na ang pangalan ay Katya.",

"Sa totoo lang‚Ä¶",
"kahit mukha akong masungit noon,",
"napapangiti mo ako, Na para bang na kuryente ako ng 10 volts sa kilig.",

"Naalala ko pa nung iniwan tayo ni ate sa pool.",
"Sobrang kaba ko nun,",
"hindi ko alam kung paano kita kakausapin.",

"Tahimik lang ako.",
"pero ang bilis ng tibok ng puso ko.",

"Pero kahit ganun‚Ä¶",
"ang gaan ng pakiramdam ko kasama ka.",

"Isa ‚Äôyon sa mga moments na..",
"hinding-hindi ko makakalimutan, bubby. ü§ç",

"Alam mo pag-uwi natin nun.",
"hindi ka na talaga mawala sa isip ko.",

"Paulit-ulit kitang naiisip sa buong gabi.",

"Nahihiya sana akong i-add ka‚Ä¶",
"pero mas nangibabaw yung kagustuhan kong makausap ka.",

"May mga araw na hindi ko namamalayan‚Ä¶",
"ikaw na pala yung hinihintay kong kausap.",

"Kahit simpleng message mo lang‚Ä¶",
"sapat na para gumaan yung buong araw ko.",

"Unti-unti.",
"Naging comfort ka sa‚Äôkin. Bubby..",

"Hindi ko man nasasabi‚Ä¶",
"pero sobrang grateful ako na nakilala kita.",

"Parang bawat tawa mo.",
"bawat ngiti mo‚Ä¶",
"Naka print na sa utak ko, Kapag naiisip kita bigla nalang ako napapangiti",

"Hindi ko man maipaliwanag ng buo‚Ä¶",
"pero alam kong special kana sa‚Äôkin.",

"Gusto kong malaman mo‚Ä¶",
"seryoso ako sa nararamdaman ko.",

"Hindi lang basta crush.",
"o simpleng paghanga.",

"Gusto kitang makasama sa bawat araw bawat gabi bawat oras at bawat minuto.",
"Sa good days at pati sa bad days.",

"Gusto kong maramdaman mo‚Ä¶",
"kung gaano ka ka-importante sa‚Äôkin, Bubby..",

"Kaya bubby‚Ä¶",
"may isang tanong lang akong gustong itanong sa‚Äôyo.",

"Handa kana ba?"
];
 
// TYPING ANIMATION FUNCTION
function typeWriter(text, element, speed = 45, callback) {
  let i = 0;
  element.textContent = ""; // linisin muna

  const typingInterval = setInterval(() => {
    element.textContent += text.charAt(i);
    i++;
    if (i >= text.length) {
      clearInterval(typingInterval);
      if (callback) callback(); // optional callback kapag tapos na
    }
  }, speed);
}

let finalMsgIndex = 0;
const finalFlow = document.getElementById('finalFlow');
const finalLine = document.getElementById('finalLine');
const nextFinalBtn = document.getElementById('nextFinalBtn');
const finalQuestion = document.getElementById('finalQuestion');
const finalScoreEl = document.getElementById('finalScore');
const finalTitle = document.getElementById('finalTitle');
const finalMsgEl = document.getElementById('finalMsg');
const finalBtn = document.getElementById('shareBtn');

const finalMusic = document.getElementById('finalMusic');

finalBtn.addEventListener('click', () => {
  const score = parseInt(finalScoreEl.textContent.split(" / ")[0]);
  if(score >= 6){
    finalTitle.style.display = 'none';
    finalScoreEl.style.display = 'none';
    finalMsgEl.style.display = 'none';
    finalBtn.style.display = 'none';
    document.getElementById('restartBtn').style.display = 'none';

    finalFlow.style.display = 'flex';
    finalMsgIndex = 0;
    typeWriter(finalMessages[finalMsgIndex], finalLine);

    // Play music safely
    finalMusic.volume = 0.5;
    const playPromise = finalMusic.play();
    if (playPromise !== undefined) {
      playPromise.catch(error => {
        console.log("Audio play was blocked:", error);
      });
    }
  } else {
    alert("Kailangan mo muna makakuha ng at least 6 points para ma-access ang final question!");
  }
});

// NEXT MESSAGE BUTTON
nextFinalBtn.addEventListener('click', () => {
  finalMsgIndex++;

  // Habang may messages pa, typing animation lang
  if(finalMsgIndex < finalMessages.length){
    typeWriter(finalMessages[finalMsgIndex], finalLine);

  } else {
    // Kapag tapos na lahat ng messages
    finalFlow.style.display = 'none';            // itago typing flow
    finalQuestion.style.display = 'flex';        // ipakita Yes / No
    finalQuestion.style.pointerEvents = 'auto';  // siguraduhing clickable

    // Kunin buttons at result box
    const yesBtn = document.getElementById('yesBtn');
    const noBtn = document.getElementById('noBtn');
    const finalResult = document.getElementById('finalResult');

    // Siguraduhin may img at p sa loob ng finalResult
    finalResult.innerHTML = `
      <img id="resultGif" style="width:220px; margin-bottom:12px;">
      <p id="resultText" style="font-size:22px;"></p>
    `;
    const resultGif = document.getElementById('resultGif');
    const resultText = document.getElementById('resultText');

    // YES BUTTON ‚Üí HAPPY GIF
    yesBtn.onclick = () => {
      finalQuestion.style.display = 'none';
      finalResult.style.display = 'block';

      resultGif.src = '';
      setTimeout(() => { resultGif.src = 'assets/happy.gif'; }, 50);

      resultText.textContent = "Thankyou, Bubbyyy ü§ç";
    };

    // NO BUTTON ‚Üí SAD GIF
    noBtn.onclick = () => {
      finalQuestion.style.display = 'none';
      finalResult.style.display = 'block';

      resultGif.src = '';
      setTimeout(() => { resultGif.src = 'assets/sad.gif'; }, 50);

      resultText.textContent = "It‚Äôs okay‚Ä¶ I‚Äôll respect your answer ü§ç";
    };
  }
});


/***************
 * INITIALIZE
 ***************/
renderQuestions();
updateControls();

</script>
</body>
</html>


